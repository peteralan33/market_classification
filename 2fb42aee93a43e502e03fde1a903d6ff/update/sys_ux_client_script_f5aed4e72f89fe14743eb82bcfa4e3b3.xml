<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ux_client_script">
    <sys_ux_client_script action="INSERT_OR_UPDATE">
        <controller_preset/>
        <includes/>
        <macroponent display_value="CM Investigation Record Page - Horizontal">e1aed4e72f89fe14743eb82bcfa4e377</macroponent>
        <name>PostRequestInfoComments</name>
        <preset/>
        <required_translations>[
    {
        "message": "An error occurred while requesting info. If the issue persists, contact your system administrator"
    },
    {
        "message": "Comments posted"
    }
]</required_translations>
        <script><![CDATA[/**
 * @param {params} params
 * @param {api} params.api
 * @param {any} params.event
 * @param {any} params.imports
 * @param {ApiHelpers} params.helpers
 */
function handler({
    api,
    event,
    helpers,
    imports
}) {

    var body = {
        'sysId': api.context.props.sysId,
        'table': api.context.props.table,
        'comments': api.state.textContent
    };
    helpers.snHttp("/api/sn_csm_playbook/request_info/post", {
            method: "POST",
            body: body
        })
        .then(({
            response
        }) => {
            if (!response.result.success) {
                helpers.translate("An error occurred while requesting info. If the issue persists, contact your system administrator")
                    .then((translatedText) => {
                        api.emit("NOW_UXF_PAGE#ADD_NOTIFICATIONS", {
                    items: [{
                        id: "alert4",
                        status: "critical",
                        icon: "exclamation-triangle-outline",
                        content: translatedText,
                        action: {
                            type: "dismiss"
                        },
                    }],
                });
            
                    });
            } else {
                helpers.translate("Comments posted")
                    .then((translatedText) => {
                        api.emit("NOW_UXF_PAGE#ADD_NOTIFICATIONS", {
                            items: [{
                                id: "alert4",
                                status: "info",
                                icon: "info-circle-outline",
                                content: translatedText,
                                action: {
                                    type: "dismiss"
                                },
                            }],
                        });
                    });

            }
            helpers.modal.close('request_info_modal');
        });
}]]></script>
        <script_api_version>2.0.0</script_api_version>
        <sys_class_name>sys_ux_client_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-11-12 09:16:35</sys_created_on>
        <sys_id>f5aed4e72f89fe14743eb82bcfa4e3b3</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>PostRequestInfoComments</sys_name>
        <sys_package display_value="Pete's Market Classifications Toolkit" source="x_snc_pab_mc_tkit">2fb42aee93a43e502e03fde1a903d6ff</sys_package>
        <sys_policy/>
        <sys_scope display_value="Pete's Market Classifications Toolkit">2fb42aee93a43e502e03fde1a903d6ff</sys_scope>
        <sys_update_name>sys_ux_client_script_f5aed4e72f89fe14743eb82bcfa4e3b3</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-11-12 09:16:35</sys_updated_on>
        <target>macroponent</target>
        <type>default</type>
    </sys_ux_client_script>
</record_update>
